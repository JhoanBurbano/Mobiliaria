{"ast":null,"code":"import _asyncToGenerator from \"/media/jhoanburbano/ubuntu-data/jhoanburbano/projects/angular/Architect/_client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport Swal from 'sweetalert2';\nlet InmuebleComponent = class InmuebleComponent {\n  constructor(cookie, router, homeS, activeR, fb) {\n    this.cookie = cookie;\n    this.router = router;\n    this.homeS = homeS;\n    this.activeR = activeR;\n    this.fb = fb;\n    this.rol = this.cookie.get('ROL');\n    this.favoritos = [];\n    this.name = this.cookie.get('USER');\n    this.comments = [];\n    this.commentForm = this.fb.group({\n      content: [\"\", [Validators.required, Validators.pattern(/^[a-zA-Z\\s.,¿?!¡À-ÿ\\u00f1\\u00d1]{2,250}$/)]]\n    });\n  }\n\n  ngOnInit() {\n    this.captureParams();\n    this.obtenerInmueble(this.idInm);\n  }\n\n  captureParams() {\n    this.idInm = this.activeR.snapshot.params['idInm'];\n  }\n\n  obtenerComentarios() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        _this.comments = yield _this.homeS.getComment(_this.idInm);\n      } catch (error) {\n        Swal.fire(error.name, error.message, 'error');\n      }\n    })();\n  }\n\n  obtenerInmueble(idInm) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        _this2.loadFavorites();\n\n        const data = yield _this2.homeS.getInmueble(idInm);\n        _this2.inmueble = data;\n        _this2.comments = _this2.inmueble.comments;\n      } catch (error) {\n        Swal.fire('Ocurrio un error', undefined, 'error');\n      }\n    })();\n  }\n\n  noLogin() {\n    if (this.rol === '') {\n      this.router.navigate(['/auth/signup']);\n    }\n  }\n\n  loadFavorites() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this3.rol === 'CLIENT') {\n        try {\n          _this3.favoritos = yield _this3.homeS.getFavorites(null);\n        } catch (error) {}\n      }\n    })();\n  }\n\n  addFavorite(idInm) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        const message = yield _this4.homeS.addFavorite(idInm);\n\n        if (message.message === 'Añadido a favoritos') {\n          Swal.fire({\n            titleText: 'Susess',\n            text: message.message,\n            icon: message.icon\n          });\n        } else {\n          const {\n            isConfirmed,\n            isDenied\n          } = yield Swal.fire({\n            titleText: '¿Estas seguro que quieres remover de tus favoritos?',\n            icon: 'question',\n            showDenyButton: true,\n            showConfirmButton: true,\n            confirmButtonText: 'Si',\n            denyButtonText: 'No'\n          });\n\n          if (isConfirmed) {\n            const removed = yield _this4.homeS.removeFavorite(idInm);\n            Swal.fire({\n              titleText: 'Susess',\n              text: removed.message,\n              icon: removed.icon\n            });\n          }\n        }\n\n        _this4.loadFavorites();\n\n        _this4.obtenerInmueble(idInm);\n      } catch (error) {\n        Swal.fire('Error del try', 'Ocurrio un error');\n      }\n    })();\n  }\n\n  addComment(event) {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      event.preventDefault();\n\n      if (_this5.commentForm.valid) {\n        try {\n          const comment = {\n            content: (_a = _this5.commentForm.get('content')) === null || _a === void 0 ? void 0 : _a.value\n          };\n          const msg = yield _this5.homeS.addComment(_this5.idInm, comment);\n          event.target.value = \"\";\n          Swal.fire(msg.message, undefined, 'success');\n\n          _this5.obtenerComentarios();\n        } catch (error) {\n          Swal.fire(error.name, error.message, 'error');\n        }\n      }\n    })();\n  }\n\n};\nInmuebleComponent = __decorate([Component({\n  selector: 'app-inmueble',\n  templateUrl: './inmueble.component.html',\n  styleUrls: ['./inmueble.component.scss']\n})], InmuebleComponent);\nexport { InmuebleComponent };","map":{"version":3,"sources":["/media/jhoanburbano/ubuntu-data/jhoanburbano/projects/angular/Architect/_client/src/app/components/inmueble/inmueble.component.ts"],"names":["__decorate","Component","Validators","Swal","InmuebleComponent","constructor","cookie","router","homeS","activeR","fb","rol","get","favoritos","name","comments","commentForm","group","content","required","pattern","ngOnInit","captureParams","obtenerInmueble","idInm","snapshot","params","obtenerComentarios","getComment","error","fire","message","loadFavorites","data","getInmueble","inmueble","undefined","noLogin","navigate","getFavorites","addFavorite","titleText","text","icon","isConfirmed","isDenied","showDenyButton","showConfirmButton","confirmButtonText","denyButtonText","removed","removeFavorite","addComment","event","_a","preventDefault","valid","comment","value","msg","target","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport Swal from 'sweetalert2';\nlet InmuebleComponent = class InmuebleComponent {\n    constructor(cookie, router, homeS, activeR, fb) {\n        this.cookie = cookie;\n        this.router = router;\n        this.homeS = homeS;\n        this.activeR = activeR;\n        this.fb = fb;\n        this.rol = this.cookie.get('ROL');\n        this.favoritos = [];\n        this.name = this.cookie.get('USER');\n        this.comments = [];\n        this.commentForm = this.fb.group({\n            content: [\"\", [\n                    Validators.required,\n                    Validators.pattern(/^[a-zA-Z\\s.,¿?!¡À-ÿ\\u00f1\\u00d1]{2,250}$/)\n                ]]\n        });\n    }\n    ngOnInit() {\n        this.captureParams();\n        this.obtenerInmueble(this.idInm);\n    }\n    captureParams() {\n        this.idInm = this.activeR.snapshot.params['idInm'];\n    }\n    async obtenerComentarios() {\n        try {\n            this.comments = await this.homeS.getComment(this.idInm);\n        }\n        catch (error) {\n            Swal.fire(error.name, error.message, 'error');\n        }\n    }\n    async obtenerInmueble(idInm) {\n        try {\n            this.loadFavorites();\n            const data = await this.homeS.getInmueble(idInm);\n            this.inmueble = data;\n            this.comments = this.inmueble.comments;\n        }\n        catch (error) {\n            Swal.fire('Ocurrio un error', undefined, 'error');\n        }\n    }\n    noLogin() {\n        if (this.rol === '') {\n            this.router.navigate(['/auth/signup']);\n        }\n    }\n    async loadFavorites() {\n        if (this.rol === 'CLIENT') {\n            try {\n                this.favoritos = await this.homeS.getFavorites(null);\n            }\n            catch (error) {\n            }\n        }\n    }\n    async addFavorite(idInm) {\n        try {\n            const message = await this.homeS.addFavorite(idInm);\n            if (message.message === 'Añadido a favoritos') {\n                Swal.fire({\n                    titleText: 'Susess',\n                    text: message.message,\n                    icon: message.icon,\n                });\n            }\n            else {\n                const { isConfirmed, isDenied } = await Swal.fire({\n                    titleText: '¿Estas seguro que quieres remover de tus favoritos?',\n                    icon: 'question',\n                    showDenyButton: true,\n                    showConfirmButton: true,\n                    confirmButtonText: 'Si',\n                    denyButtonText: 'No'\n                });\n                if (isConfirmed) {\n                    const removed = await this.homeS.removeFavorite(idInm);\n                    Swal.fire({\n                        titleText: 'Susess',\n                        text: removed.message,\n                        icon: removed.icon,\n                    });\n                }\n            }\n            this.loadFavorites();\n            this.obtenerInmueble(idInm);\n        }\n        catch (error) {\n            Swal.fire('Error del try', 'Ocurrio un error');\n        }\n    }\n    async addComment(event) {\n        var _a;\n        event.preventDefault();\n        if (this.commentForm.valid) {\n            try {\n                const comment = {\n                    content: (_a = this.commentForm.get('content')) === null || _a === void 0 ? void 0 : _a.value\n                };\n                const msg = await this.homeS.addComment(this.idInm, comment);\n                event.target.value = \"\";\n                Swal.fire(msg.message, undefined, 'success');\n                this.obtenerComentarios();\n            }\n            catch (error) {\n                Swal.fire(error.name, error.message, 'error');\n            }\n        }\n    }\n};\nInmuebleComponent = __decorate([\n    Component({\n        selector: 'app-inmueble',\n        templateUrl: './inmueble.component.html',\n        styleUrls: ['./inmueble.component.scss']\n    })\n], InmuebleComponent);\nexport { InmuebleComponent };\n"]},"metadata":{},"sourceType":"module"}