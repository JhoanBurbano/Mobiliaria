{"ast":null,"code":"import _asyncToGenerator from \"/media/jhoanburbano/ubuntu-data/jhoanburbano/projects/angular/Architect/_client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nlet MyAccountComponent = class MyAccountComponent {\n  constructor(sanitizer, profileS, toast, router, fb) {\n    var _this = this;\n\n    this.sanitizer = sanitizer;\n    this.profileS = profileS;\n    this.toast = toast;\n    this.router = router;\n    this.fb = fb;\n    this.datos = {};\n    this.isEdit = false;\n    this.nProfile = null;\n\n    this.extraerBase64 = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* ($event) {\n        return new Promise(resolve => {\n          try {\n            const unsafeImg = window.URL.createObjectURL($event);\n\n            const image = _this.sanitizer.bypassSecurityTrustUrl(unsafeImg);\n\n            const reader = new FileReader();\n            reader.readAsDataURL($event);\n\n            reader.onload = () => {\n              resolve({\n                base: reader.result\n              });\n            };\n\n            reader.onerror = error => {\n              resolve({\n                base: null\n              });\n            };\n          } catch (e) {\n            return null;\n          }\n        });\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    this.editUserForm = this.fb.group({\n      name: ['', Validators.required],\n      lastname: ['', Validators.required],\n      email: ['', Validators.required],\n      password: ['', [Validators.required, Validators.pattern(/^(?=.*\\d)(?=.*[!@#$.%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,16}$/)]],\n      rol: ['', Validators.required],\n      number: ['', Validators.required],\n      desc: ['']\n    });\n  }\n\n  ngOnInit() {\n    this.obtenerProfile();\n  }\n\n  crearForm(data) {\n    this.editUserForm.controls['name'].setValue(this.datos.name);\n    this.editUserForm.controls['lastname'].setValue(this.datos.lastname);\n    this.editUserForm.controls['email'].setValue(this.datos.email);\n    this.editUserForm.controls['rol'].setValue(this.datos.rol);\n    this.editUserForm.controls['number'].setValue(this.datos.number);\n    this.editUserForm.controls['desc'].setValue(this.datos.desc);\n    this.editUserForm.controls['password'].setValue(`.0DebesCambiar0.`);\n  }\n\n  obtenerProfile() {\n    this.profileS.getData(true).subscribe(data => {\n      this.datos = data.user;\n      this.crearForm(data);\n      this.UFO = data.user.password;\n    }, err => {});\n  }\n\n  touchEditar(event) {\n    event.preventDefault();\n    this.isEdit = true;\n    this.toast.info('ahora estas editando tu perfil', 'Editar Activated');\n  }\n\n  captarProfile(event) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      console.log(event.target.files[0]);\n      let img = yield _this2.extraerBase64(event.target.files[0]);\n      let base = img.base;\n      let data = yield _this2.getImageDimensions(base);\n\n      if (data.w <= data.h * 1.16) {\n        _this2.nProfile = base;\n\n        if (data.w > data.h) {\n          _this2.classImg = `transform: scale(1.2)`;\n        } else if (data.w <= data.h) {\n          _this2.classImg = 'width: 12rem;';\n        }\n      } else {\n        _this2.toast.show('La imagen debe tener una relacion de aspecto proporcional 1:1, recortela o elija otra', 'DIMENSION NO PERMITIDA');\n      }\n    })();\n  }\n\n  noImage() {\n    this.nProfile = null;\n  }\n\n  getImageDimensions(file) {\n    return new Promise(function (resolved, rejected) {\n      var i = new Image();\n\n      i.onload = function () {\n        resolved({\n          w: i.width,\n          h: i.height\n        });\n      };\n\n      i.src = file;\n    });\n  }\n\n  actualizarPerfil(event) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a, _b, _c, _d, _e, _f;\n\n      event.preventDefault();\n      let urlImg = null;\n      let password;\n\n      if (((_a = _this3.editUserForm.get('password')) === null || _a === void 0 ? void 0 : _a.value) === '.0DebesCambiar0.') {\n        password = _this3.UFO;\n      }\n\n      const newUser = {\n        img: urlImg,\n        name: (_b = _this3.editUserForm.get('name')) === null || _b === void 0 ? void 0 : _b.value,\n        lastname: (_c = _this3.editUserForm.get('lastname')) === null || _c === void 0 ? void 0 : _c.value,\n        rol: (_d = _this3.editUserForm.get('rol')) === null || _d === void 0 ? void 0 : _d.value,\n        number: (_e = _this3.editUserForm.get('number')) === null || _e === void 0 ? void 0 : _e.value,\n        email: (_f = _this3.editUserForm.get('email')) === null || _f === void 0 ? void 0 : _f.value,\n        password: password\n      };\n      console.log(newUser);\n      alert(_this3.editUserForm.valid);\n    })();\n  }\n\n};\nMyAccountComponent = __decorate([Component({\n  selector: 'app-my-account',\n  templateUrl: './my-account.component.html',\n  styleUrls: ['./my-account.component.scss']\n})], MyAccountComponent);\nexport { MyAccountComponent };","map":{"version":3,"sources":["/media/jhoanburbano/ubuntu-data/jhoanburbano/projects/angular/Architect/_client/src/app/profile/components/my-account/my-account.component.ts"],"names":["__decorate","Component","Validators","MyAccountComponent","constructor","sanitizer","profileS","toast","router","fb","datos","isEdit","nProfile","extraerBase64","$event","Promise","resolve","unsafeImg","window","URL","createObjectURL","image","bypassSecurityTrustUrl","reader","FileReader","readAsDataURL","onload","base","result","onerror","error","e","editUserForm","group","name","required","lastname","email","password","pattern","rol","number","desc","ngOnInit","obtenerProfile","crearForm","data","controls","setValue","getData","subscribe","user","UFO","err","touchEditar","event","preventDefault","info","captarProfile","console","log","target","files","img","getImageDimensions","w","h","classImg","show","noImage","file","resolved","rejected","i","Image","width","height","src","actualizarPerfil","_a","_b","_c","_d","_e","_f","urlImg","get","value","newUser","alert","valid","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nlet MyAccountComponent = class MyAccountComponent {\n    constructor(sanitizer, profileS, toast, router, fb) {\n        this.sanitizer = sanitizer;\n        this.profileS = profileS;\n        this.toast = toast;\n        this.router = router;\n        this.fb = fb;\n        this.datos = {};\n        this.isEdit = false;\n        this.nProfile = null;\n        this.extraerBase64 = async ($event) => new Promise((resolve) => {\n            try {\n                const unsafeImg = window.URL.createObjectURL($event);\n                const image = this.sanitizer.bypassSecurityTrustUrl(unsafeImg);\n                const reader = new FileReader();\n                reader.readAsDataURL($event);\n                reader.onload = () => {\n                    resolve({\n                        base: reader.result\n                    });\n                };\n                reader.onerror = error => {\n                    resolve({\n                        base: null\n                    });\n                };\n            }\n            catch (e) {\n                return null;\n            }\n        });\n        this.editUserForm = this.fb.group({\n            name: ['', Validators.required],\n            lastname: ['', Validators.required],\n            email: ['', Validators.required],\n            password: ['',\n                [\n                    Validators.required,\n                    Validators.pattern(/^(?=.*\\d)(?=.*[!@#$.%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,16}$/)\n                ]],\n            rol: ['', Validators.required],\n            number: ['', Validators.required],\n            desc: ['',],\n        });\n    }\n    ngOnInit() {\n        this.obtenerProfile();\n    }\n    crearForm(data) {\n        this.editUserForm.controls['name'].setValue(this.datos.name);\n        this.editUserForm.controls['lastname'].setValue(this.datos.lastname);\n        this.editUserForm.controls['email'].setValue(this.datos.email);\n        this.editUserForm.controls['rol'].setValue(this.datos.rol);\n        this.editUserForm.controls['number'].setValue(this.datos.number);\n        this.editUserForm.controls['desc'].setValue(this.datos.desc);\n        this.editUserForm.controls['password'].setValue(`.0DebesCambiar0.`);\n    }\n    obtenerProfile() {\n        this.profileS.getData(true).subscribe(data => {\n            this.datos = data.user;\n            this.crearForm(data);\n            this.UFO = data.user.password;\n        }, err => {\n        });\n    }\n    touchEditar(event) {\n        event.preventDefault();\n        this.isEdit = true;\n        this.toast.info('ahora estas editando tu perfil', 'Editar Activated');\n    }\n    async captarProfile(event) {\n        console.log(event.target.files[0]);\n        let img = await this.extraerBase64(event.target.files[0]);\n        let base = img.base;\n        let data = await this.getImageDimensions(base);\n        if (data.w <= (data.h * 1.16)) {\n            this.nProfile = base;\n            if (data.w > data.h) {\n                this.classImg = `transform: scale(1.2)`;\n            }\n            else if (data.w <= data.h) {\n                this.classImg = 'width: 12rem;';\n            }\n        }\n        else {\n            this.toast.show('La imagen debe tener una relacion de aspecto proporcional 1:1, recortela o elija otra', 'DIMENSION NO PERMITIDA');\n        }\n    }\n    noImage() {\n        this.nProfile = null;\n    }\n    getImageDimensions(file) {\n        return new Promise(function (resolved, rejected) {\n            var i = new Image();\n            i.onload = function () {\n                resolved({ w: i.width, h: i.height });\n            };\n            i.src = file;\n        });\n    }\n    async actualizarPerfil(event) {\n        var _a, _b, _c, _d, _e, _f;\n        event.preventDefault();\n        let urlImg = null;\n        let password;\n        if (((_a = this.editUserForm.get('password')) === null || _a === void 0 ? void 0 : _a.value) === '.0DebesCambiar0.') {\n            password = this.UFO;\n        }\n        const newUser = {\n            img: urlImg,\n            name: (_b = this.editUserForm.get('name')) === null || _b === void 0 ? void 0 : _b.value,\n            lastname: (_c = this.editUserForm.get('lastname')) === null || _c === void 0 ? void 0 : _c.value,\n            rol: (_d = this.editUserForm.get('rol')) === null || _d === void 0 ? void 0 : _d.value,\n            number: (_e = this.editUserForm.get('number')) === null || _e === void 0 ? void 0 : _e.value,\n            email: (_f = this.editUserForm.get('email')) === null || _f === void 0 ? void 0 : _f.value,\n            password: password,\n        };\n        console.log(newUser);\n        alert(this.editUserForm.valid);\n    }\n};\nMyAccountComponent = __decorate([\n    Component({\n        selector: 'app-my-account',\n        templateUrl: './my-account.component.html',\n        styleUrls: ['./my-account.component.scss']\n    })\n], MyAccountComponent);\nexport { MyAccountComponent };\n"]},"metadata":{},"sourceType":"module"}